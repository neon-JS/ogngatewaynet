version: '3.8'
services:
  gateway:
    image: gateway
    build:
      context: ../src
      dockerfile: ../docker/Dockerfile
    ports:
      - "5000:5000"
    environment:
      # - GatewayOptions:EventsOnly=
      # - GatewayOptions:MinimalAltitude=
      # - GatewayOptions:MinimalSpeed=
      # - GatewayOptions:Workers=
      # - GatewayOptions:IntervalSeconds=
      # - GatewayOptions:MaxAgeSeconds=
      # - AprsConfig:AprsPort=
      # - AprsConfig:AprsUser=
      # - AprsConfig:AprsPassword=
      # - AprsConfig:AprsHost=
      # - AprsConfig:DdbAircraftListUrl=
      # - AprsConfig:FilterPosition:Latitude=
      # - AprsConfig:FilterPosition:Longitude=
      # - AprsConfig:FilterRadius=
      - Urls:http://+:5000
  frontend:
    image: nginx:latest
    volumes:
      - ../src/frontend:/usr/share/nginx/html:ro
      - ./nginx/nginx.conf:/etc/nginx/nginx.conf:ro
    ports:
      - "8080:8080"
    depends_on:
      - gateway